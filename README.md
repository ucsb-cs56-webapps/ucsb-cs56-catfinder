# ucsb-cs56-catfinder

The simplest possible SparkJava web app (Hello World)

* [javadocs](https://ucsb-cs56-pconrad.github.io/sparkjava-01/apidocs/index.html)
* [web page generated by Maven (NOT THE WEB APP)](https://ucsb-cs56-pconrad.github.io/sparkjava-01/index.html).  This is simply documentation automatically generated by Maven, not the actual running web app.


# Using Freemarker as a template engine

With a template engine, a template can be thought of as a 'view' in the Model-View-Controller design pattern. It is essentially a layout with parameters.
Here is how to start using FreeMarker.

In your pom.xml, include Freemarker as a dependency:

```
        <dependency>
          <groupId>org.freemarker</groupId>
          <artifactId>freemarker</artifactId>
          <version>2.3.28</version>
        </dependency>
       
```

Create a layout file in your jar. Freemarker uses .ftl files. It will be like html. Values can be inserted with ${id}. For example:

```
<html>
<head>
    <title>${title_value}/title>
</head>
<body></body>
</html>
```

Now, set up a Configuration instance. In this example, a layouts folder is adjacent to the class file. 
The templates will be loaded from the layouts folder. A template named "home.ftl" is used.

```
    Configuration cfg = new Configuration(Configuration.VERSION_2_3_26);
    cfg.setClassForTemplateLoading(CatFinder.class, "layouts");
    cfg.setDefaultEncoding("UTF-8");
```

To insert values into the template:

```
get("/", (Request req, Response res) -> {
            StringWriter writer = new StringWriter();
            Map attributes = new HashMap();
            attributes.put("title_value", "This is the home page");
            try {
                Template homeTemplate = cfg.getTemplate("home.ftl");
                homeTemplate.process(attributes, writer);
            } catch (Exception e) {
                System.out.println(e);
                System.out.println("home.ftl not found!");
                Spark.halt(500);
            }
            return writer;
        });
```



# To use

| To do this | Do this |
| -----------|-----------|
| run the program | Type `mvn exec:java`.  Visit the web page it indicates in the message |
| check that edits to the pom.xml file are valid | Type `mvn validate` |
| clean up so you can recompile everything  | Type `mvn clean` |
| edit the source code for the app | edit files in `src/main/java`.<br>Under that the directories for the package are `edu/ucsb/cs56/pconrad`  |
| edit the source code for the app | edit files in `src/test/java`.<br>Under that the directories for the package are `edu/ucsb/cs56/pconrad`  |
| compile    | Type `mvn compile` |
| run junit tests | Type `mvn test` |
| build the website, including javadoc | Type `mvn site-deploy` then look in either `target/site/apidocs/index.html`  |
| copy the website to `/docs` for publishing via github-pages | Type `mvn site-deploy` then look for javadoc in `docs/apidocs/index.html` |	
| make a jar file | Type `mvn package` and look in `target/*.jar` |

| run the main in the jar file | Type `java -jar target/sparkjava-demo-01-1.0-jar-with-dependencies.jar ` |
| change which main gets run by the jar | Edit the `<mainClass>` element in `pom.xml` |
